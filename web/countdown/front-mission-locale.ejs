<html>
  <head>
    <title>COUNTDOWN MISSION LOCALCE FRONT</title>
    <link rel="stylesheet" href="/css/master.css">
  </head>
  <body class="overflow">
    <div class="countdown-ml" id="countdown-front-ml">
      <div class="countdown-ml-wrapper">
        <div class="countdown-ml-content" style="color: MidnightBlue;">
          {{afficheur}}
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js" charset="utf-8"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
    <script type="text/javascript">
          var socket = io.connect('http://<%= config.host %>:<%= config.port %>');
          var initData = {
            displayOn: true,
            time: 30,
            currentTime: {minutes: 0, seconds: 30, secondTenths: 0}
          }
          var app = new Vue({
            el: '#countdown-front-ml',
            data: Object.assign({}, initData),
            computed: {
              afficheur: function () {
                return this.currentTime.minutes +':'+this.currentTime.seconds
              }
            }
          })
          var date = moment("0000-00-00 00:00:00")
          console.log(date)
          console.log(moment().month(0).date(0).hours(0).minutes(0).seconds(0).milliseconds(0))
          console.log(moment().second(30))
          socket.on('front-countdown', function(data){
            if(data.action == "change"){
              console.log(data.content.currentTime)
              app.currentTime = data.content.currentTime
              app.time = data.content.time
            }
          })


    </script>
  </body>
</html>
